<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ dataset.title }}</title>
    <meta name="description" content="Global maps of 31 plant functional traits at 1 km resolution, derived from crowdsourced biodiversity monitoring and Earth observation data. Published in Nature Communications." />

    <!-- Open Graph meta tags -->
    <meta property="og:title" content="{{ dataset.title }}" />
    <meta property="og:description" content="Global maps of 31 plant functional traits at 1 km resolution, derived from crowdsourced biodiversity monitoring and Earth observation data. Published in Nature Communications." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://planttraits.earth" />
    <meta property="og:image" content="https://planttraits.earth/static/images/exemplar.png" />

    <!-- Twitter Card meta tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="{{ dataset.title }}" />
    <meta name="twitter:description" content="Global maps of 31 plant functional traits at 1 km resolution, derived from crowdsourced biodiversity monitoring and Earth observation data." />
    <meta name="twitter:image" content="https://planttraits.earth/static/images/exemplar.png" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Serif+Text:ital@0;1&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,400;0,500;1,400;1,500&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="stylesheet" href="static/style.css" />
  </head>
  <body>
    <button class="toc-toggle" id="toc-toggle" aria-label="Toggle table of contents" aria-expanded="false">
      <i class="fas fa-bars"></i>
    </button>
    <nav class="toc-sidebar" id="toc-sidebar" aria-label="Table of contents">
      <div class="toc-content">
        <h3 class="toc-heading">Contents</h3>
        <ul class="toc-list">
          <li><a href="#sample-image" class="toc-link" data-section="sample-image">Trait Maps</a></li>
          <li><a href="#abstract" class="toc-link" data-section="abstract">Abstract</a></li>
          <li><a href="#methodology" class="toc-link" data-section="methodology">Methodology</a></li>
          <li><a href="#usage-notes" class="toc-link" data-section="usage-notes">Usage Notes</a></li>
          <li><a href="#citation" class="toc-link" data-section="citation">How to Cite</a></li>
          <li><a href="#related-work" class="toc-link" data-section="related-work">Related Work</a></li>
        </ul>
      </div>
    </nav>
    <div class="container">
      <header>
        <h1 class="title">{{ dataset.title }}</h1>
        <h2 class="authors">
          {% for author in dataset.authors %}
          {% if author.link and author.link != "" %}
          <a href="{{author.link}}" target="_blank">{{ author.name }}</a><sup>{{ author.affiliation }}</sup>{% if not loop.last %}, {% endif %}
          {% else %}
          {{ author.name }}<sup>{{ author.affiliation }}</sup>{% if not loop.last %}, {% endif %}
          {% endif %}
          {% endfor %}
        </h2>
        <a href="https://doi.org/{{ dataset.doi }}" target="_blank" class="doi-badge">
          <img src="https://img.shields.io/badge/DOI-{{ dataset.doi | replace('-', '--') }}-blue?logo=doi" alt="DOI: {{ dataset.doi }}">
        </a>
      </header>

      <section id="sample-image">
        <div class="img-container">
          <h2 class="img-title">{{ dataset.image_title }}</h2>
          <img
            src="{{ dataset.sample_image }}"
            alt="Sample image from dataset"
          />
          <figcaption>{{ dataset.image_caption }}</figcaption>
        </div>
      </section>

      <section class="links">
        <!-- <h2>Links</h2> -->
        <ul>
          {% for button in dataset.buttons %}
          <li>
            <a href="{{ button.link }}" target="_blank" alt="{{ button.alt }}"
              ><i class="fas fa-{{ button.icon }}"></i
              ><span>{{ button.text }}</span></a
            >
          </li>
          {% endfor %}
        </ul>
      </section>

      <section id="abstract">
        <h2>Abstract</h2>
        <p>{{ dataset.abstract | safe}}</p>
      </section>

      <section id="methodology">
        <h2>Methodology</h2>
        <p>{{ dataset.methodology | safe}}</p>
        <img
          src="{{ dataset.methodology_image }}"
          alt="Methodology image"
          width="100%"
        />
      </section>

      <section id="usage-notes">
        <h2>Usage Notes</h2>
        <p>{{ dataset.usage_notes | safe}}</p>
        <div class="links">
          <ul>
            {% for button in dataset.buttons %} {% if button.text == "Download"
            %}
            <li>
              <a href="{{ button.link }}" target="_blank" alt="{{ button.alt }}"
                ><i class="fas fa-{{ button.icon }}"></i
                ><span>{{ button.text }}</span></a
              >
            </li>
            {% endif %} {% endfor %}
          </ul>
        </div>
        <h3>Trait descriptions</h3>
        <table style="border-collapse: collapse; width: 100%;">
          <caption style="caption-side: bottom; text-align: left; margin-top: 1em">
            <strong>Plant functional traits used for modeling and trait map generation.</strong> 
            "Trait" refers to a shortened version of the "TRY trait name", "TRY trait name" refers to the name used in the TRY trait database, and "TRY ID" is the identifier for the trait in the TRY trait database.
            "Pearson's r" is the cross-validated Pearson's correlation coefficient between the trait map and spatially independent sPlot community-weighted mean trait values.
            <br>
            <br>
            <strong>*</strong> Experimental traitsâ€”model performance below the heuristic threshold of r=0.5 and reliability is reduced. Please consider your use case before incorporating these trait maps into your analysis.
          </caption>
          <thead>
            <tr>
              <th>Trait</th>
              <th>TRY trait name</th>
              <th>TRY ID</th>
              <th>Unit</th>
              <th>Pearson's r</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Conduit element length*</td>
              <td>Wood vessel element length; stem conduit (vessel and tracheids) element length</td>
              <td>282</td>
              <td>&micro;m</td>
              <td>0.45</td>
            </tr>
            <tr>
              <td>Dispersal unit length*</td>
              <td>Dispersal unit length</td>
              <td>237</td>
              <td>mm</td>
              <td>0.36</td>
            </tr>
            <tr>
              <td>LDMC*</td>
              <td>Leaf dry mass per leaf fresh mass (leaf dry matter content, LDMC)</td>
              <td>47</td>
              <td>g g<sup>-1</sup></td>
              <td>0.47</td>
            </tr>
            <tr>
              <td>Leaf area</td>
              <td>Leaf area (in case of compound leaves: leaflet, undefined if petiole is in- or excluded)</td>
              <td>3113</td>
              <td>mm<sup>2</sup></td>
              <td>0.59</td>
            </tr>
            <tr>
              <td>Leaf C</td>
              <td>Leaf carbon (C) content per leaf dry mass</td>
              <td>13</td>
              <td>mg g<sup>-1</sup></td>
              <td>0.55</td>
            </tr>
            <tr>
              <td>Leaf C/N ratio</td>
              <td>Leaf carbon/nitrogen (C/N) ratio</td>
              <td>146</td>
              <td>g g<sup>-1</sup></td>
              <td>0.57</td>
            </tr>
            <tr>
              <td>Leaf delta 15N</td>
              <td>Leaf nitrogen (N) isotope signature (delta 15N)</td>
              <td>78</td>
              <td>ppm</td>
              <td>0.56</td>
            </tr>
            <tr>
              <td>Leaf dry mass</td>
              <td>Leaf dry mass (single leaf)</td>
              <td>55</td>
              <td>g</td>
              <td>0.50</td>
            </tr>
            <tr>
              <td>Leaf fresh mass*</td>
              <td>Leaf fresh mass</td>
              <td>163</td>
              <td>g</td>
              <td>0.49</td>
            </tr>
            <tr>
              <td>Leaf length*</td>
              <td>Leaf length</td>
              <td>144</td>
              <td>mm</td>
              <td>0.49</td>
            </tr>
            <tr>
              <td>Leaf N (area)</td>
              <td>Leaf nitrogen (N) content per leaf area</td>
              <td>50</td>
              <td>g m<sup>-2</sup></td>
              <td>0.63</td>
            </tr>
            <tr>
              <td>Leaf N (mass)</td>
              <td>Leaf nitrogen (N) content per leaf dry mass</td>
              <td>14</td>
              <td>mg g<sup>-1</sup></td>
              <td>0.56</td>
            </tr>
            <tr>
              <td>Leaf P</td>
              <td>Leaf phosphorus (P) content per leaf dry mass</td>
              <td>15</td>
              <td>mg g<sup>-1</sup></td>
              <td>0.54</td>
            </tr>
            <tr>
              <td>Leaf thickness</td>
              <td>Leaf thickness</td>
              <td>46</td>
              <td>mm</td>
              <td>0.52</td>
            </tr>
            <tr>
              <td>Leaf water content*</td>
              <td>Leaf water content per leaf dry mass (not saturated)</td>
              <td>3120</td>
              <td>g g<sup>-1</sup></td>
              <td>0.48</td>
            </tr>
            <tr>
              <td>Leaf width</td>
              <td>Leaf width</td>
              <td>145</td>
              <td>mm</td>
              <td>0.51</td>
            </tr>
            <tr>
              <td>Plant height*</td>
              <td>Plant height (vegetative)</td>
              <td>3106</td>
              <td>m</td>
              <td>0.45</td>
            </tr>
            <tr>
              <td>Rooting depth</td>
              <td>Root rooting depth</td>
              <td>6</td>
              <td>m</td>
              <td>0.60</td>
            </tr>
            <tr>
              <td>Seed germination rate*</td>
              <td>Seed germination rate (germination efficiency)</td>
              <td>95</td>
              <td>days</td>
              <td>0.47</td>
            </tr>
            <tr>
              <td>Seed length*</td>
              <td>Seed length</td>
              <td>27</td>
              <td>mm</td>
              <td>0.39</td>
            </tr>
            <tr>
              <td>Seed mass*</td>
              <td>Seed dry mass</td>
              <td>26</td>
              <td>mg</td>
              <td>0.47</td>
            </tr>
            <tr>
              <td>Seed number*</td>
              <td>Seed number per reproduction unit</td>
              <td>138</td>
              <td>-</td>
              <td>0.43</td>
            </tr>
            <tr>
              <td>SLA</td>
              <td>Leaf area per leaf dry mass (specific leaf area, SLA or 1/LMA): undefined if petiole is in- or excluded)</td>
              <td>3117</td>
              <td>m<sup>2</sup> kg<sup>-1</sup></td>
              <td>0.63</td>
            </tr>
            <tr>
              <td>SRL*</td>
              <td>Root length per root dry mass (specific root length, SRL)</td>
              <td>1080</td>
              <td>cm g<sup>-1</sup></td>
              <td>0.46</td>
            </tr>
            <tr>
              <td>SRL (fine)*</td>
              <td>Fine root length per fine root dry mass (specific fine root length, SRL)</td>
              <td>614</td>
              <td>cm g<sup>-1</sup></td>
              <td>0.43</td>
            </tr>
            <tr>
              <td>SSD</td>
              <td>Stem specific density (SSD) or wood density (stem dry mass per stem fresh volume)</td>
              <td>4</td>
              <td>g cm<sup>-3</sup></td>
              <td>0.59</td>
            </tr>
            <tr>
              <td>Stem conduit density</td>
              <td>Stem conduit density (vessels and tracheids)</td>
              <td>169</td>
              <td>mm<sup>-2</sup></td>
              <td>0.56</td>
            </tr>
            <tr>
              <td>Stem conduit diameter</td>
              <td>Stem conduit diameter (vessels, tracheids)</td>
              <td>281</td>
              <td>&micro;m</td>
              <td>0.60</td>
            </tr>
            <tr>
              <td>Stem diameter*</td>
              <td>Stem diameter</td>
              <td>21</td>
              <td>m</td>
              <td>0.48</td>
            </tr>
            <tr>
              <td>Wood fiber lengths*</td>
              <td>Wood fiber lengths</td>
              <td>289</td>
              <td>&micro;m</td>
              <td>0.39</td>
            </tr>
            <tr>
              <td>Wood ray density*</td>
              <td>Wood rays per millimetre (wood ray density)</td>
              <td>297</td>
              <td>mm<sup>-1</sup></td>
              <td>0.22</td>
            </tr>
          </tbody>
        </table>

      </section>

      <section id="citation">
        <h2>How to Cite</h2>
        <h3>Paper</h3>
        <div class="citation-block">
          <button class="copy-btn" onclick="copyToClipboard(this)">
            <i class="fas fa-copy"></i> Copy
          </button>
          <pre>{{ dataset.paper_citation }}</pre>
        </div>
        <h3>Dataset</h3>
        <div class="citation-block">
          <button class="copy-btn" onclick="copyToClipboard(this)">
            <i class="fas fa-copy"></i> Copy
          </button>
          <pre>{{ dataset.dataset_citation }}</pre>
        </div>
      </section>

      <section id="related-work">
        <h2>Related Work</h2>
        <ul>
          {% for work in dataset.related_work %}
          <li>
            <a href="{{ work.link }}" target="_blank">{{ work.title }}</a>
          </li>
          {% endfor %}
        </ul>
      </section>
      <p class="affiliations">
          {% for aff_id, aff_name in dataset.affiliations.items() %}
          <sup>{{ aff_id }}</sup> {{ aff_name }}{% if not loop.last %}, {% endif %} 
          {% endfor %}
        </p>
      <footer>
        <p>
          &copy; {{ dataset.current_year }} Daniel Lusk. All rights reserved.
        </p>
      </footer>
    </div>
    <a href="https://global-traits.projects.earthengine.app/view/global-traits" target="_blank" class="floating-explore">
      <i class="fas fa-earth-america"></i> Explore <i class="fas fa-arrow-right"></i>
    </a>
    <script async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
    <script async src="https://scripts.simpleanalyticscdn.com/auto-events.js"></script>
    <script>
      !function(t,e){var o,n,p,r;e.__SV||(window.posthog && window.posthog.__loaded)||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init rs ls wi ns us ts ss capture calculateEventProperties vs register register_once register_for_session unregister unregister_for_session gs getFeatureFlag getFeatureFlagPayload getFeatureFlagResult isFeatureEnabled reloadFeatureFlags updateFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey cancelPendingSurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException startExceptionAutocapture stopExceptionAutocapture loadToolbar get_property getSessionProperty fs ds createPersonProfile setInternalOrTestUser ps Qr opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing hs debug M cs getPageViewId captureTraceFeedback captureTraceMetric Kr".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
      posthog.init('phc_cqNn7Ysr1UsBSUI3owoKCmsQlxX5AFLxWgyoHslnRjE', {
          api_host: 'https://e.planttraits.earth',
          ui_host: 'https://eu.posthog.com',
          defaults: '2025-11-30',
          person_profiles: 'always',
          cookieless_mode: 'always',
      })
    </script>
    <script>
      function copyToClipboard(button) {
        const pre = button.parentElement.querySelector('pre');
        navigator.clipboard.writeText(pre.textContent).then(() => {
          const originalText = button.innerHTML;
          button.innerHTML = '<i class="fas fa-check"></i> Copied!';
          setTimeout(() => {
            button.innerHTML = originalText;
          }, 2000);
        });
      }
    </script>
    <script>
      // ToC toggle
      (function () {
        var sidebar = document.getElementById('toc-sidebar');
        var toggle = document.getElementById('toc-toggle');
        var backdrop = document.createElement('div');
        backdrop.className = 'toc-backdrop';
        document.body.appendChild(backdrop);

        function open() {
          sidebar.classList.add('open');
          backdrop.classList.add('visible');
          toggle.setAttribute('aria-expanded', 'true');
          toggle.innerHTML = '<i class="fas fa-times"></i>';
        }
        function close() {
          sidebar.classList.remove('open');
          backdrop.classList.remove('visible');
          toggle.setAttribute('aria-expanded', 'false');
          toggle.innerHTML = '<i class="fas fa-bars"></i>';
        }

        toggle.addEventListener('click', function () {
          sidebar.classList.contains('open') ? close() : open();
        });
        backdrop.addEventListener('click', close);
        sidebar.querySelectorAll('.toc-link').forEach(function (link) {
          link.addEventListener('click', function () {
            if (window.innerWidth <= 1250) close();
          });
        });
        document.addEventListener('keydown', function (e) {
          if (e.key === 'Escape' && sidebar.classList.contains('open')) close();
        });
      })();

      // ToC active section highlighting
      (function () {
        var tocLinks = document.querySelectorAll('.toc-link');
        var sections = Array.from(tocLinks)
          .map(function (l) { return document.getElementById(l.dataset.section); })
          .filter(Boolean);
        var activeLink = null;

        function setActive(id) {
          if (activeLink) activeLink.classList.remove('active');
          var link = document.querySelector('.toc-link[data-section="' + id + '"]');
          if (link) { link.classList.add('active'); activeLink = link; }
        }

        var observer = new IntersectionObserver(function (entries) {
          var best = null;
          entries.forEach(function (entry) {
            if (entry.isIntersecting) {
              if (!best || entry.boundingClientRect.top < best.boundingClientRect.top) {
                best = entry;
              }
            }
          });
          if (best) setActive(best.target.id);
        }, { rootMargin: '0px 0px -70% 0px', threshold: 0 });

        sections.forEach(function (s) { observer.observe(s); });
      })();
    </script>
  </body>
</html>
